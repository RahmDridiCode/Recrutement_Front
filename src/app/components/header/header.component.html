<header class="sticky top-0 z-50 glass border-b border-border/40 backdrop-blur">
  <nav class="container mx-auto px-4 lg:px-6 h-20 flex items-center justify-between" role="navigation" aria-label="Navigation principale">
    <div class="flex items-center gap-8">
      <a routerLink="/" class="flex items-center gap-2 group">
        <div class="w-10 h-10 rounded-xl bg-primary flex items-center justify-center text-primary-foreground font-bold text-xl transition-transform group-hover:scale-105">
          J
        </div>
        <span class="font-display text-xl font-bold">Jobs</span>
      </a>

      <div class="hidden md:flex items-center gap-6 text-sm font-medium">
        <a routerLink="/contact" routerLinkActive="text-foreground" class="text-foreground/80 hover:text-foreground transition-colors">Contact</a>
        <a routerLink="/addOffre" routerLinkActive="text-foreground" class="text-foreground/80 hover:text-foreground transition-colors">Ajouter une Offre</a>
      </div>
    </div>

    <div class="flex items-center gap-3">
      <button type="button" (click)="toggleTheme()" class="inline-flex h-10 w-10 items-center justify-center rounded-lg border border-border/60 hover:border-border transition" [attr.aria-label]="isDarkMode ? 'Activer le thème clair' : 'Activer le thème sombre'">
        <svg *ngIf="!isDarkMode" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </svg>
        <svg *ngIf="isDarkMode" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
      </button>

      <ng-container *ngIf="auth.isloggedIn; else guestActions">
        <div class="hidden sm:flex items-center gap-3 px-3 py-2 rounded-xl bg-secondary/40">
          <img [src]="auth?.loggedUser?.image || defaultAvatar" alt="Avatar utilisateur" class="user-avatar" loading="lazy">
          <div>
            <p class="text-sm font-semibold">{{ auth?.loggedUser?.nom || auth?.loggedUser?.name || 'Mon compte' }}</p>
            <p class="text-xs text-muted-foreground capitalize" *ngIf="auth?.loggedUser?.role">{{ auth?.loggedUser?.role | lowercase }}</p>
          </div>
        </div>
        <button type="button" (click)="logout()" class="inline-flex h-10 w-10 items-center justify-center rounded-lg border border-border/60 hover:bg-secondary/60 transition" aria-label="Se déconnecter">
          <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
            <polyline points="16 17 21 12 16 7" />
            <line x1="21" y1="12" x2="9" y2="12" />
          </svg>
        </button>
      </ng-container>

      <ng-template #guestActions>
        <div class="flex items-center gap-3">
          <a routerLink="/login" class="hidden sm:inline-flex items-center rounded-lg border border-border/60 px-4 py-2 text-sm font-semibold text-foreground hover:bg-secondary/60 transition">
            Connexion
          </a>
          <a routerLink="/signup" class="inline-flex items-center rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground shadow hover:bg-primary/90 transition">
            S'inscrire
          </a>
        </div>
      </ng-template>
    </div>
  </nav>
</header>
