<app-header></app-header>

<main class="min-h-screen bg-background text-foreground py-16 px-4 lg:px-8">
  <div class="container mx-auto max-w-5xl" *ngIf="user; else emptyProfile">
    <section class="glass rounded-3xl p-8 flex flex-col md:flex-row items-center md:items-start gap-8 mb-10">
      <div class="relative">
        <img [src]="user?.image || 'https://ssl.gstatic.com/accounts/ui/avatar_2x.png'" alt="Photo de profil"
             class="w-40 h-40 rounded-3xl object-cover border-4 border-white/80 shadow-lg">
        <div class="absolute -bottom-3 -right-3 bg-primary text-primary-foreground rounded-full p-3 shadow-lg">
          <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 20h9" />
            <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z" />
          </svg>
        </div>
      </div>

      <div class="space-y-4 text-center md:text-left">
        <div>
          <p class="text-sm uppercase tracking-[0.25em] text-muted-foreground mb-2">Mon profil</p>
          <h1 class="text-3xl md:text-4xl font-display font-bold">{{ user?.firstName }} {{ user?.lastName }}</h1>
          <p class="text-muted-foreground">{{ user?.role === 'RECRUTER' ? 'Recruteur' : user?.role === 'STUDENT' ? 'Étudiant' : 'Membre de la plateforme' }}</p>
        </div>

        <div class="flex flex-wrap justify-center md:justify-start gap-4">
          <div class="glass px-4 py-2 rounded-2xl text-sm">
            <p class="text-muted-foreground">Membre depuis</p>
            <p class="font-semibold">{{ user?.createdAt | date:'MMMM y' || '—' }}</p>
          </div>
          <div class="glass px-4 py-2 rounded-2xl text-sm">
            <p class="text-muted-foreground">Ville</p>
            <p class="font-semibold">{{ user?.address || 'Non renseignée' }}</p>
          </div>
        </div>

        <div class="flex flex-wrap gap-3 justify-center md:justify-start">
          <a routerLink="/editProfile"
             class="inline-flex items-center rounded-xl bg-primary px-5 py-3 text-sm font-semibold text-primary-foreground shadow hover:bg-primary/90 transition">
            <svg class="mr-2 h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 20h9" />
              <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z" />
            </svg>
            Modifier le profil
          </a>
          <button type="button" routerLink="/addOffre"
                  class="inline-flex items-center rounded-xl border border-border px-5 py-3 text-sm font-semibold hover:bg-secondary/60 transition">
            Publier une offre
          </button>
        </div>
      </div>
    </section>

    <div class="grid gap-6 md:grid-cols-2">
      <section class="glass rounded-2xl p-6 space-y-4">
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-semibold">Informations personnelles</h2>
          <span class="text-xs uppercase tracking-widest text-muted-foreground">Mis à jour</span>
        </div>

        <dl class="space-y-4 text-sm">
          <div class="flex flex-col gap-1">
            <dt class="text-muted-foreground uppercase tracking-wide text-[11px]">Nom</dt>
            <dd class="text-base font-medium">{{ user?.firstName || '—' }}</dd>
          </div>
          <div class="flex flex-col gap-1">
            <dt class="text-muted-foreground uppercase tracking-wide text-[11px]">Prénom</dt>
            <dd class="text-base font-medium">{{ user?.lastName || '—' }}</dd>
          </div>
          <div class="flex flex-col gap-1">
            <dt class="text-muted-foreground uppercase tracking-wide text-[11px]">Adresse</dt>
            <dd class="text-base font-medium">{{ user?.address || 'Non renseignée' }}</dd>
          </div>
        </dl>
      </section>

      <section class="glass rounded-2xl p-6 space-y-4">
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-semibold">Coordonnées</h2>
          <span class="text-xs uppercase tracking-widest text-muted-foreground">Sécurisées</span>
        </div>

        <dl class="space-y-4 text-sm">
          <div class="flex flex-col gap-1">
            <dt class="text-muted-foreground uppercase tracking-wide text-[11px]">Email</dt>
            <dd class="text-base font-medium break-all">{{ user?.username || '—' }}</dd>
          </div>
          <div class="flex flex-col gap-1">
            <dt class="text-muted-foreground uppercase tracking-wide text-[11px]">Téléphone</dt>
            <dd class="text-base font-medium">{{ user?.phone || 'Non renseigné' }}</dd>
          </div>
          <div class="flex flex-col gap-1">
            <dt class="text-muted-foreground uppercase tracking-wide text-[11px]">Rôle</dt>
            <dd class="text-base font-medium capitalize">{{ user?.role | lowercase || '—' }}</dd>
          </div>
        </dl>
      </section>
    </div>
  </div>

  <ng-template #emptyProfile>
    <div class="container mx-auto max-w-3xl text-center glass rounded-3xl p-12">
      <h1 class="text-3xl font-display font-bold mb-4">Aucun profil chargé</h1>
      <p class="text-muted-foreground mb-6">Veuillez vous reconnecter pour accéder à votre profil.</p>
      <a routerLink="/login" class="inline-flex items-center rounded-xl bg-primary px-5 py-3 text-sm font-semibold text-primary-foreground shadow hover:bg-primary/90 transition">
        Retour à la connexion
      </a>
    </div>
  </ng-template>
</main>

<app-footer></app-footer>
